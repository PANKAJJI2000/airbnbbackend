<% layout("/layouts/boilerplate") %>

<div class="row">
    <h1 class="col-6 offset-3">Reset Password</h1>
    <div class="col-8 offset-2"><br />
        <p class="text-muted">Enter your new password below.</p>
        
        <form action="/reset-password/<%= token %>" method="POST" class="needs-validation" novalidate>
            <div class="mb-3">
                <label for="password" class="form-label">New Password</label>
                <input
                  type="password"
                  id="password"
                  name="password"
                  class="form-control"
                  minlength="6"
                  placeholder="Enter new password"
                  required
                />
                <div class="invalid-feedback">Password must be at least 6 characters.</div>
            </div>
            
            <div class="mb-3">
                <label for="confirmPassword" class="form-label">Confirm Password</label>
                <input
                  type="password"
                  id="confirmPassword"
                  name="confirmPassword"
                  class="form-control"
                  minlength="6"
                  placeholder="Confirm new password"
                  required
                />
                <div class="invalid-feedback">Passwords must match.</div>
            </div>
            
            <button class="btn btn-primary" type="submit">Reset Password</button>
            <a href="/login" class="btn btn-secondary ms-2">Back to Login</a>
        </form>
    </div>
</div>

<script>
    // Client-side password match validation
    const password = document.getElementById('password');
    const confirmPassword = document.getElementById('confirmPassword');
    
    confirmPassword.addEventListener('input', function() {
        if (password.value !== confirmPassword.value) {
            confirmPassword.setCustomValidity('Passwords do not match');
        } else {
            confirmPassword.setCustomValidity('');
        }
    });
</script>
